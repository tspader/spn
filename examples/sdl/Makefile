EX_SDL_SPN_DIR = ../..
EX_SDL_DIR_BUILD_EXAMPLES = $(EX_SDL_SPN_DIR)/build/examples
EX_SDL_BINARY := $(EX_SDL_DIR_BUILD_EXAMPLES)/sdl

SPN := $(EX_SDL_SPN_DIR)/build/bin/spn
CC := gcc

EX_SDL_FLAG_LANGUAGE := -std=c11
EX_SDL_FLAG_OPTIMIZATION := -g
EX_SDL_FLAG_LIBS := -lSDL3
EX_SDL_FLAG_OUTPUT := -o $(EX_SDL_BINARY)
EX_SDL_FLAG_SPN := $(shell $(SPN) flags all)
EX_SDL_CC_FLAGS := $(EX_SDL_FLAG_LANGUAGE) $(EX_SDL_FLAG_OPTIMIZATION) $(EX_SDL_FLAG_SPN) $(EX_SDL_FLAG_OUTPUT)

all: $(EX_SDL_BINARY)

$(EX_SDL_DIR_BUILD_EXAMPLES):
	@mkdir -p $(EX_SDL_DIR_BUILD_EXAMPLES)

$(EX_SDL_BINARY): main.c $(EX_SDL_DIR_BUILD_EXAMPLES)
	$(SPN) build
	$(CC) main.c $(EX_SDL_CC_FLAGS) $(EX_SDL_FLAG_LIBS)

.PHONY: all
